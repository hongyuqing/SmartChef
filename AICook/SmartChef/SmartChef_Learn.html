<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Chef - 學料理</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="body1">
    <!-- <div class="L">
    </div> -->

    <div class="search">
      <div class="search-text">
        <input type="text" placeholder="搜尋" id="textInput" />
        <a href="#" id="submitButton">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
            <path
              d="M19.375 17.5H18.3875L18.0375 17.1625C19.3048 15.6925 20.0014 13.8159 20 11.875C20 10.268 19.5235 8.69714 18.6307 7.361C17.7379 6.02485 16.469 4.98344 14.9843 4.36848C13.4997 3.75352 11.866 3.59262 10.2899 3.90612C8.7138 4.21963 7.26606 4.99346 6.12976 6.12976C4.99346 7.26606 4.21963 8.7138 3.90612 10.2899C3.59262 11.866 3.75352 13.4997 4.36848 14.9843C4.98344 16.469 6.02485 17.7379 7.361 18.6307C8.69714 19.5235 10.268 20 11.875 20C13.8875 20 15.7375 19.2625 17.1625 18.0375L17.5 18.3875V19.375L23.75 25.6125L25.6125 23.75L19.375 17.5ZM11.875 17.5C8.7625 17.5 6.25 14.9875 6.25 11.875C6.25 8.7625 8.7625 6.25 11.875 6.25C14.9875 6.25 17.5 8.7625 17.5 11.875C17.5 14.9875 14.9875 17.5 11.875 17.5Z"
              fill="#888888" />
          </svg>
        </a>
      </div>
    </div>
    <div class="LL">

    </div>
    <div class="learn-title">學料理</div>

    <!--料理列表-->
    <div class="learn-body" id="learn-body">
      <div class="learn-content">
      </div>
    </div>

    <div class="onfooter">
    </div>


    <footer>
      <div class="Footer">
        <div class="home">
          <a href="SmartChef_Home.html"><svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"
              viewBox="0 0 35 35" fill="none">
              <path
                d="M17.5 4.375C17.5 4.375 8.47877 12.1625 3.43731 16.38C3.27689 16.5198 3.14764 16.6917 3.05795 16.8847C2.96826 17.0776 2.92013 17.2873 2.91669 17.5C2.91669 17.8868 3.07033 18.2577 3.34382 18.5312C3.61731 18.8047 3.98825 18.9583 4.37502 18.9583H7.29169V29.1667C7.29169 29.5534 7.44533 29.9244 7.71882 30.1979C7.99231 30.4714 8.36325 30.625 8.75002 30.625H13.125C13.5118 30.625 13.8827 30.4714 14.1562 30.1979C14.4297 29.9244 14.5834 29.5534 14.5834 29.1667V23.3333H20.4167V29.1667C20.4167 29.5534 20.5703 29.9244 20.8438 30.1979C21.1173 30.4714 21.4882 30.625 21.875 30.625H26.25C26.6368 30.625 27.0077 30.4714 27.2812 30.1979C27.5547 29.9244 27.7084 29.5534 27.7084 29.1667V18.9583H30.625C31.0118 18.9583 31.3827 18.8047 31.6562 18.5312C31.9297 18.2577 32.0834 17.8868 32.0834 17.5C32.0813 17.2832 32.03 17.0697 31.9332 16.8756C31.8364 16.6816 31.6968 16.5121 31.5248 16.38C26.5184 12.1625 17.5 4.375 17.5 4.375Z"
                fill="#45BC63" />
            </svg></a>
        </div>
        <div class="learn">
          <a href="SmartChef_Learn.html"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="35"
              viewBox="0 0 35 35" fill="none">
              <mask id="mask0_274_1289" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="7" y="0" width="21"
                height="35">
                <path
                  d="M9.47916 2.91667H25.5208L24.7917 9.47917L18.5937 13.8542H16.4062L10.2083 9.47917L9.47916 2.91667Z"
                  fill="white" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M17.5 13.8542V21.875" stroke="white" stroke-width="4" stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M19.6875 24.0625C19.6875 22.8544 18.7081 21.875 17.5 21.875C16.2919 21.875 15.3125 22.8544 15.3125 24.0625V29.8958C15.3125 31.104 16.2919 32.0833 17.5 32.0833C18.7081 32.0833 19.6875 31.104 19.6875 29.8958V24.0625Z"
                  fill="white" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
              </mask>
              <g mask="url(#mask0_274_1289)">
                <path d="M0 0H35V35H0V0Z" fill="#45BC63" />
              </g>
            </svg></a>
        </div>
        <div class="teach">
          <a href="SmartChef_Teach.html"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="35"
              viewBox="0 0 35 35" fill="none">
              <path
                d="M31.0209 1.28952L33.717 3.98485C35.4277 5.69509 35.4277 8.46567 33.717 10.1759L30.1519 13.74L30.0835 13.6716L28.9886 12.5771L22.4195 6.00977L21.2563 4.84681L24.8213 1.28268C26.532 -0.427559 29.3034 -0.427559 31.0141 1.28268L31.0209 1.28952ZM16.4937 7.82946C15.8504 7.18641 14.8103 7.18641 14.174 7.82946L7.18747 14.8141C6.54425 15.4571 5.50414 15.4571 4.86776 14.8141C4.23138 14.171 4.22454 13.1312 4.86776 12.495L11.8474 5.51038C13.7702 3.58808 16.8905 3.58808 18.8134 5.51038L19.7098 6.40654L20.8731 7.56951L27.4421 14.1368L28.537 15.2314L28.6054 15.2998L27.4421 16.4627L15.7067 28.1881C12.4222 31.4718 8.23442 33.7156 3.67712 34.6254L1.96642 34.9675C1.42584 35.0769 0.87157 34.9059 0.481531 34.516C0.091492 34.1261 -0.072735 33.5719 0.0299069 33.0315L0.372047 31.3213C1.28214 26.7652 3.52657 22.5785 6.81111 19.2949L17.3901 8.72563L16.4937 7.82946Z"
                fill="#45BC63" />
            </svg></a>
        </div>
        <div class="user">
          <a href="SmartChef_User.html"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"
              viewBox="0 0 27 27" fill="none">
              <path
                d="M13.5 0C15.2902 0 17.0071 0.711158 18.273 1.97703C19.5388 3.2429 20.25 4.95979 20.25 6.75C20.25 8.54021 19.5388 10.2571 18.273 11.523C17.0071 12.7888 15.2902 13.5 13.5 13.5C11.7098 13.5 9.9929 12.7888 8.72703 11.523C7.46116 10.2571 6.75 8.54021 6.75 6.75C6.75 4.95979 7.46116 3.2429 8.72703 1.97703C9.9929 0.711158 11.7098 0 13.5 0ZM13.5 16.875C20.9587 16.875 27 19.8956 27 23.625V27H0V23.625C0 19.8956 6.04125 16.875 13.5 16.875Z"
                fill="#45BC63" />
            </svg></a>
        </div>
      </div>

    </footer>

  </div>

  <!--script-->
  <script>
    // 連接料理列表
    document.addEventListener("DOMContentLoaded", async function () {
      // 搜尋
      const inputElement = document.getElementById("textInput");
      const submitButton = document.getElementById("submitButton");

      submitButton.addEventListener("click", function () {
        const userInput = inputElement.value;
      });
      if (inputElement != null) {
        const BASE_URL = "http://localhost:5000/AICook/Cook/";
        var accessToken = localStorage.getItem('accessToken');
        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");
        myHeaders.append("Authorization", "Bearer " + accessToken);
        try {
          var raw = JSON.stringify([
            {
              "cook_Id": 0,
              "member_Id": 0,
              "cook_UpdateTime": "2023-10-20T13:39:00.324Z",
              "cook_PostCheck": true,
              "cook_Name": "string",
              "cook_Description": "string",
              "cook_Browse": 0,
              "cook_Like": 0,
              "cook_Public": true,
              "cook_Photo": "string",
              "member_Username": "string"
            }
          ]);

          var response = await fetch(BASE_URL + "GetDataList", {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
          });

          if (!response.ok) {
            throw new Error('Server error: ' + response.status);
          }

          var data = await response.json();
          renderData(data);

        } catch (error) {
          if (error instanceof TypeError) {
            console.error('Network error:', error.message);
          } else {
            console.error('Error:', error.message);
          }
        }
      }
      else {
        const BASE_URL = "http://localhost:5000/AICook/Cook/";
        var accessToken = localStorage.getItem('accessToken');
        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");
        myHeaders.append("Authorization", "Bearer " + accessToken);
        try {
          var raw = JSON.stringify([
            {
              "cook_Id": 0,
              "member_Id": 0,
              "cook_UpdateTime": "2023-10-20T13:39:00.324Z",
              "cook_PostCheck": true,
              "cook_Name": "string",
              "cook_Description": "string",
              "cook_Browse": 0,
              "cook_Like": 0,
              "cook_Public": true,
              "cook_Photo": "string",
              "member_Username": "string"
            }
          ]);

          var response = await fetch(BASE_URL + "GetSearchList?Search=" + userInput, {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
          });

          if (!response.ok) {
            throw new Error('Server error: ' + response.status);
          }

          var data = await response.json();
          renderData(data);

        } catch (error) {
          if (error instanceof TypeError) {
            console.error('Network error:', error.message);
          } else {
            console.error('Error:', error.message);
          }
        }
      }

    });
    // 套用CSS
    function renderData(apiData) {
      const container = document.querySelector('.learn-body');
      container.innerHTML = '';

      apiData.forEach(item => {
        // 連結
        const link = document.createElement('a');
        link.href = 'SmartChef_Cook.html?id=' + item.cook_Id;
        // 內容
        const Content = document.createElement('div');
        Content.className = 'learn-content';
        // 左區塊
        const leftContent = document.createElement('div');
        leftContent.className = 'learn-content-left';
        // 圖
        const stiker = document.createElement('div');
        stiker.className = 'learn-stiker';
        // 圖片
        const image = document.createElement('img');
        image.src = "../../../Recipes/" + item.cook_Id + "/" + item.cook_Photo + ".png";
        image.className = 'img-full';
        stiker.appendChild(image);
        leftContent.appendChild(stiker);

        // 右區塊
        const rightContent = document.createElement('div');
        rightContent.className = 'learn-content-right';
        // 文字
        const textContent = document.createElement('div');
        textContent.className = 'learn-content-text';
        // 標題
        const title = document.createElement('div');
        title.className = 'FS';
        title.textContent = item.cook_Name;
        // 描述
        const category = document.createElement('div');
        category.className = 'fs';
        category.textContent = item.cook_Description;
        // 時間
        const dateAdded = document.createElement('div');
        dateAdded.className = 'fs1';
        // 解析日期时间字符串
        const dateTimeString = item.cook_UpdateTime;
        const date = new Date(dateTimeString);
        // 提取日期部分
        const datePart = date.toLocaleDateString();
        dateAdded.textContent = datePart;
        // 新增至textContent
        textContent.appendChild(title);
        textContent.appendChild(category);
        textContent.appendChild(dateAdded);
        rightContent.appendChild(textContent);

        const iconContainer = document.createElement('div');
        iconContainer.className = 'icon';
        const iconContent = document.createElement('div');
        iconContent.className = 'icon-content';

        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('width', '20');
        svg.setAttribute('height', '19');
        svg.setAttribute('viewBox', '0 0 20 19');
        svg.setAttribute('fill', 'none');
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', 'M10 18.35L8.55 17.03C3.4 12.36 0 9.27 0 5.5C0 2.41 2.42 0 5.5 0C7.24 0 8.91 0.81 10 2.08C11.09 0.81 12.76 0 14.5 0C17.58 0 20 2.41 20 5.5C20 9.27 16.6 12.36 11.45 17.03L10 18.35Z');
        path.setAttribute('fill', '#F80101');
        svg.appendChild(path);
        iconContent.appendChild(svg);
        iconContainer.appendChild(iconContent);

        Content.appendChild(leftContent);
        Content.appendChild(rightContent);
        Content.appendChild(iconContainer);
        link.appendChild(Content);

        container.appendChild(link);
      });
    }
  </script>
</body>

</html>