<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Chef - 料理頁面</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="body1">
    <!--Header-->
    <div class="L"></div>
    <div>
      <div class="Register2">
        <div class="back" id="back">
          <a href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="24" viewBox="0 0 24 24" fill="none">
              <path
                d="M16.62 2.99004C16.5039 2.87363 16.366 2.78127 16.2141 2.71826C16.0622 2.65524 15.8994 2.6228 15.735 2.6228C15.5706 2.6228 15.4078 2.65524 15.2559 2.71826C15.1041 2.78127 14.9661 2.87363 14.85 2.99004L6.54 11.3C6.4473 11.3926 6.37375 11.5024 6.32357 11.6234C6.27339 11.7444 6.24756 11.8741 6.24756 12.005C6.24756 12.136 6.27339 12.2657 6.32357 12.3867C6.37375 12.5076 6.4473 12.6175 6.54 12.71L14.85 21.02C15.34 21.51 16.13 21.51 16.62 21.02C17.11 20.53 17.11 19.74 16.62 19.25L9.38 12L16.63 4.75004C17.11 4.27004 17.11 3.47004 16.62 2.99004Z"
                fill="black" />
            </svg>
          </a>
        </div>
        <div class="Register-word">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19" fill="none">
            <path
              d="M10 18.35L8.55 17.03C3.4 12.36 0 9.27 0 5.5C0 2.41 2.42 0 5.5 0C7.24 0 8.91 0.81 10 2.08C11.09 0.81 12.76 0 14.5 0C17.58 0 20 2.41 20 5.5C20 9.27 16.6 12.36 11.45 17.03L10 18.35Z"
              fill="#F80101" />
          </svg>
        </div>
      </div>
    </div>

    <!--Content-->
    <div class="content">
      <!--料理教程圖片-->
      <img class="pic">
      <div class="info">
        <div class="dish"></div>
        <div class="start">
          <!--開始教程-->
          <a href="#" id="startTutorialButton">
            <svg xmlns="http://www.w3.org/2000/svg" width="82" height="51" viewBox="0 0 82 51" fill="none">
              <g filter="url(#filter0_d_129_238)">
                <rect x="4" width="74" height="43" rx="21.5" fill="#AC8F75" />
              </g>
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M32 14.0474L34.2898 13L50 21.9517V24.0466L34.2898 33L32 31.9526V14.0474ZM34.9457 16.3991V29.5992L46.528 22.9992L34.9457 16.3991Z"
                fill="#6D4C2F" />
              <defs>
                <filter id="filter0_d_129_238" x="0" y="0" width="82" height="51" filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB">
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                    result="hardAlpha" />
                  <feOffset dy="4" />
                  <feGaussianBlur stdDeviation="2" />
                  <feComposite in2="hardAlpha" operator="out" />
                  <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                  <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_129_238" />
                  <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_129_238" result="shape" />
                </filter>
              </defs>
            </svg>
          </a>
        </div>
      </div>
      <!--會員名稱-->
      <div class="name"><a href="SmartChef_Info.html">廚神入化</a></div>
      <!--料理描述-->
      <div class="name1 description">料理描述</div>
      <div class="mm"></div>
      <hr>
      <!--食材列表-->
      <div class="name1">食材</div>
      <div class="mm food">
        <ol>
        </ol>
      </div>
      <hr>
      <!--調味料列表-->
      <div class="name1">調味料</div>
      <div class="mm seasoning">
        <ol>
        </ol>
      </div>
      <hr>
      <!--食材處理-->
      <div class="name1">食材處理</div>
      <div class="nn processing">
        <ol>
        </ol>
      </div>
      <hr>
      <!--步驟-->
      <div class="name1">步驟</div>
      <div class="nn step">
        <ol>
        </ol>
      </div>
    </div>
    <div class="D"></div>


    <!-- <footer>
      <div class="home">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" viewBox="0 0 35 35" fill="none">
            <path
              d="M17.5 4.375C17.5 4.375 8.47877 12.1625 3.43731 16.38C3.27689 16.5198 3.14764 16.6917 3.05795 16.8847C2.96826 17.0776 2.92013 17.2873 2.91669 17.5C2.91669 17.8868 3.07033 18.2577 3.34382 18.5312C3.61731 18.8047 3.98825 18.9583 4.37502 18.9583H7.29169V29.1667C7.29169 29.5534 7.44533 29.9244 7.71882 30.1979C7.99231 30.4714 8.36325 30.625 8.75002 30.625H13.125C13.5118 30.625 13.8827 30.4714 14.1562 30.1979C14.4297 29.9244 14.5834 29.5534 14.5834 29.1667V23.3333H20.4167V29.1667C20.4167 29.5534 20.5703 29.9244 20.8438 30.1979C21.1173 30.4714 21.4882 30.625 21.875 30.625H26.25C26.6368 30.625 27.0077 30.4714 27.2812 30.1979C27.5547 29.9244 27.7084 29.5534 27.7084 29.1667V18.9583H30.625C31.0118 18.9583 31.3827 18.8047 31.6562 18.5312C31.9297 18.2577 32.0834 17.8868 32.0834 17.5C32.0813 17.2832 32.03 17.0697 31.9332 16.8756C31.8364 16.6816 31.6968 16.5121 31.5248 16.38C26.5184 12.1625 17.5 4.375 17.5 4.375Z"
              fill="#45BC63" />
          </svg></a>
      </div>
      <div class="learn">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35" fill="none">
            <mask id="mask0_274_1289" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="7" y="0" width="21"
              height="35">
              <path d="M9.47916 2.91667H25.5208L24.7917 9.47917L18.5937 13.8542H16.4062L10.2083 9.47917L9.47916 2.91667Z"
                fill="white" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M17.5 13.8542V21.875" stroke="white" stroke-width="4" stroke-linecap="round"
                stroke-linejoin="round" />
              <path
                d="M19.6875 24.0625C19.6875 22.8544 18.7081 21.875 17.5 21.875C16.2919 21.875 15.3125 22.8544 15.3125 24.0625V29.8958C15.3125 31.104 16.2919 32.0833 17.5 32.0833C18.7081 32.0833 19.6875 31.104 19.6875 29.8958V24.0625Z"
                fill="white" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
            </mask>
            <g mask="url(#mask0_274_1289)">
              <path d="M0 0H35V35H0V0Z" fill="#45BC63" />
            </g>
          </svg></a>
      </div>
      <div class="teach">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35" fill="none">
            <path
              d="M31.0209 1.28952L33.717 3.98485C35.4277 5.69509 35.4277 8.46567 33.717 10.1759L30.1519 13.74L30.0835 13.6716L28.9886 12.5771L22.4195 6.00977L21.2563 4.84681L24.8213 1.28268C26.532 -0.427559 29.3034 -0.427559 31.0141 1.28268L31.0209 1.28952ZM16.4937 7.82946C15.8504 7.18641 14.8103 7.18641 14.174 7.82946L7.18747 14.8141C6.54425 15.4571 5.50414 15.4571 4.86776 14.8141C4.23138 14.171 4.22454 13.1312 4.86776 12.495L11.8474 5.51038C13.7702 3.58808 16.8905 3.58808 18.8134 5.51038L19.7098 6.40654L20.8731 7.56951L27.4421 14.1368L28.537 15.2314L28.6054 15.2998L27.4421 16.4627L15.7067 28.1881C12.4222 31.4718 8.23442 33.7156 3.67712 34.6254L1.96642 34.9675C1.42584 35.0769 0.87157 34.9059 0.481531 34.516C0.091492 34.1261 -0.072735 33.5719 0.0299069 33.0315L0.372047 31.3213C1.28214 26.7652 3.52657 22.5785 6.81111 19.2949L17.3901 8.72563L16.4937 7.82946Z"
              fill="#45BC63" />
          </svg></a>
      </div>
      <div class="user">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 27 27" fill="none">
            <path
              d="M13.5 0C15.2902 0 17.0071 0.711158 18.273 1.97703C19.5388 3.2429 20.25 4.95979 20.25 6.75C20.25 8.54021 19.5388 10.2571 18.273 11.523C17.0071 12.7888 15.2902 13.5 13.5 13.5C11.7098 13.5 9.9929 12.7888 8.72703 11.523C7.46116 10.2571 6.75 8.54021 6.75 6.75C6.75 4.95979 7.46116 3.2429 8.72703 1.97703C9.9929 0.711158 11.7098 0 13.5 0ZM13.5 16.875C20.9587 16.875 27 19.8956 27 23.625V27H0V23.625C0 19.8956 6.04125 16.875 13.5 16.875Z"
              fill="#45BC63" />
          </svg></a>
      </div>
    </footer> -->
  </div>

  <script>
    // 返回
    document.getElementById("back").addEventListener("click", function () {
      window.history.back();
    });

    // 取得Cook_Id的資料資料
    document.addEventListener("DOMContentLoaded", async function () {
      // 從URL提取Cook_Id
      const urlParams = new URL(location.href);
      const cookId = urlParams.searchParams.get('id');
      if (cookId) {
        // 使用取得Cook_Id的資料
        const BASE_URL = "http://localhost:5000/AICook/Cook/";
        var accessToken = localStorage.getItem('accessToken');
        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");
        myHeaders.append("Authorization", "Bearer " + accessToken);

        try {
          var response = await fetch(BASE_URL + `GetDataById?Cook_Id=${cookId}`, {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
          });

          if (!response.ok) {
            throw new Error('Server error: ' + response.status);
          }

          var data = await response.json();

          renderData(data);
        } catch (error) {
          if (error instanceof TypeError) {
            console.error('Network error:', error.message);
          } else {
            console.error('Error:', error.message);
          }
        }
      }
    });

    // 套用CSS
    function renderData(apiData) {
      const container = document.querySelector('.content');
      // 料理名稱
      const dishName = container.querySelector('.dish');
      dishName.textContent = apiData.cook.cook_Name;

      // 料理圖片
      const dishPic = container.querySelector('.pic');
      dishPic.src = './images/Cook/' + apiData.cook.cook_Id + '/' + apiData.cook.cook_Photo;

      // 料理描述
      const dishDescription = container.querySelector('.description');
      dishDescription.textContent = apiData.cook.cook_Description;

      // 開啟教程按鈕
      const startTutorialButton = document.getElementById("startTutorialButton");
      const cookId = apiData.cook.cook_Id;
      const newURL = `./SmartChef_Start.html?id=${cookId}`;
      startTutorialButton.href = newURL;

      // 食材列表
      const ingredientsList = container.querySelector('.food ol');
      ingredientsList.innerHTML = ''; // 清空現有資料
      apiData.list_Food.forEach((food) => {
        const li = document.createElement('li');
        li.textContent = food.food_Name;
        ingredientsList.appendChild(li);
      });

      // 調味料列表
      const seasoningList = container.querySelector('.seasoning ol');
      seasoningList.innerHTML = ''; // 清空現有資料
      apiData.list_Seasoning.forEach((seasoning) => {
        const li = document.createElement('li');
        li.textContent = seasoning.seasoning_Name;
        seasoningList.appendChild(li);
      });

      // 食材處理列表
      const processingList = container.querySelector('.processing ol');
      processingList.innerHTML = ''; // 清空現有資料
      apiData.list_Processing.forEach((processing) => {
        const li = document.createElement('li');
        console.log(processing.processing_Description);
        li.textContent = processing.processing_Description;
        processingList.appendChild(li);
      });

      // 步驟列表
      const stepsList = container.querySelector('.step ol');
      stepsList.innerHTML = ''; // 清空現有資料
      apiData.list_Step.forEach((step) => {
        const li = document.createElement('li');
        li.textContent = step.step_Description;
        stepsList.appendChild(li);
      });
    }
  </script>

</body>

</html>