<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/Userstyle.css">
    <title>SmartChef - UserEdit</title>
</head>
<body>
    <div class="TOP2">
        <div class="back" id="back">
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M16.62 2.99004C16.5039 2.87363 16.366 2.78127 16.2141 2.71826C16.0622 2.65524 15.8994 2.6228 15.735 2.6228C15.5706 2.6228 15.4078 2.65524 15.2559 2.71826C15.1041 2.78127 14.9661 2.87363 14.85 2.99004L6.54 11.3C6.4473 11.3926 6.37375 11.5024 6.32357 11.6234C6.27339 11.7444 6.24756 11.8741 6.24756 12.005C6.24756 12.136 6.27339 12.2657 6.32357 12.3867C6.37375 12.5076 6.4473 12.6175 6.54 12.71L14.85 21.02C15.34 21.51 16.13 21.51 16.62 21.02C17.11 20.53 17.11 19.74 16.62 19.25L9.38 12L16.63 4.75004C17.11 4.27004 17.11 3.47004 16.62 2.99004Z" fill="black"/>
                </svg>
            </a>
        </div>
        <div class="title">
            <p>編輯個人資料</p>
        </div>
        <div class="Register-word">
            <!-- <a href="#" class="word">登入</a> -->
        </div>
    </div>
<diV class="Content_Convert">
    <div class="UserPhoto">
        <div class="circle">
            <svg xmlns="http://www.w3.org/2000/svg" width="83" height="83" viewBox="0 0 83 83" fill="none">
                <path
                    d="M41.4255 0.574463C46.8427 0.574463 52.038 2.72643 55.8686 6.55696C59.6991 10.3875 61.8511 15.5828 61.8511 21C61.8511 26.4172 59.6991 31.6125 55.8686 35.443C52.038 39.2736 46.8427 41.4255 41.4255 41.4255C36.0083 41.4255 30.813 39.2736 26.9825 35.443C23.152 31.6125 21 26.4172 21 21C21 15.5828 23.152 10.3875 26.9825 6.55696C30.813 2.72643 36.0083 0.574463 41.4255 0.574463ZM41.4255 51.6383C63.9957 51.6383 82.2766 60.7787 82.2766 72.0638V82.2766H0.574463V72.0638C0.574463 60.7787 18.8553 51.6383 41.4255 51.6383Z"
                    fill="#6D4C2F" />
            </svg>
            <label for="file-input" class="custom-upload-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="46" height="38" viewBox="0 0 46 38" fill="none">
                    <path
                        d="M45.9999 30.9796C45.9999 31.4685 45.6036 31.8648 45.1148 31.8648H43.4262C42.0047 31.8648 40.8524 33.0171 40.8524 34.4385V36.3176C40.8524 36.7914 40.4683 37.1755 39.9945 37.1755C39.5207 37.1755 39.1365 36.7914 39.1365 36.3176V34.4385C39.1365 33.0171 37.9842 31.8648 36.5628 31.8648H34.8741C34.3853 31.8648 33.989 31.4685 33.989 30.9796C33.989 30.4908 34.3853 30.0945 34.8741 30.0945H36.5628C37.9842 30.0945 39.1365 28.9422 39.1365 27.5207V25.6416C39.1365 25.1678 39.5207 24.7837 39.9945 24.7837C40.4683 24.7837 40.8524 25.1678 40.8524 25.6416V27.5207C40.8524 28.9422 42.0047 30.0945 43.4262 30.0945H45.1148C45.6036 30.0945 45.9999 30.4908 45.9999 30.9796Z"
                        fill="#B5B5B5" />
                    <path
                        d="M25.4918 16.9945C25.4918 19.2482 24.5966 21.4095 23.003 23.003C21.4095 24.5966 19.2482 25.4918 16.9945 25.4918C14.7409 25.4918 12.5796 24.5966 10.9861 23.003C9.39252 21.4095 8.49727 19.2482 8.49727 16.9945C8.49727 14.7409 9.39252 12.5796 10.9861 10.9861C12.5796 9.39252 14.7409 8.49727 16.9945 8.49727C19.2482 8.49727 21.4095 9.39252 23.003 10.9861C24.5966 12.5796 25.4918 14.7409 25.4918 16.9945ZM22.6594 16.9945C22.6594 15.4921 22.0626 14.0513 21.0002 12.9889C19.9378 11.9265 18.497 11.3297 16.9945 11.3297C15.4921 11.3297 14.0513 11.9265 12.9889 12.9889C11.9265 14.0513 11.3297 15.4921 11.3297 16.9945C11.3297 18.497 11.9265 19.9378 12.9889 21.0002C14.0513 22.0626 15.4921 22.6594 16.9945 22.6594C18.497 22.6594 19.9378 22.0626 21.0002 21.0002C22.0626 19.9378 22.6594 18.497 22.6594 16.9945ZM13.0801 0C12.2907 2.66673e-05 11.5169 0.220002 10.8455 0.635251C10.1741 1.0505 9.63164 1.6446 9.27902 2.35091L8.49734 3.91427C7.96091 4.98714 6.86435 5.66485 5.66485 5.66485C4.16244 5.66485 2.72156 6.26168 1.6592 7.32404C0.59683 8.38641 0 9.82729 0 11.3297V25.4918C0 26.9942 0.59683 28.4351 1.6592 29.4975C2.72156 30.5598 4.16244 31.1567 5.66485 31.1567H28.3242C29.8267 31.1567 31.2675 30.5598 32.3299 29.4975C33.3923 28.4351 33.9891 26.9942 33.9891 25.4918V11.3297C33.9891 9.82729 33.3923 8.38641 32.3299 7.32404C31.2675 6.26168 29.8267 5.66485 28.3242 5.66485C27.1247 5.66485 26.0282 4.98714 25.4917 3.91427L24.7101 2.35091C24.3575 1.6446 23.815 1.0505 23.1436 0.635251C22.4722 0.220002 21.6984 2.66673e-05 20.909 0H13.0801ZM11.814 3.61417C11.9318 3.37923 12.1125 3.18168 12.3361 3.04362C12.5597 2.90556 12.8173 2.83243 13.0801 2.83242H20.909C21.1717 2.83243 21.4293 2.90556 21.6529 3.04362C21.8765 3.18168 22.0573 3.37923 22.1751 3.61417L24.2257 7.71552C24.3435 7.95046 24.5242 8.14802 24.7478 8.28608C24.9714 8.42414 25.229 8.49726 25.4918 8.49727H28.3242C29.0754 8.49727 29.7959 8.79569 30.3271 9.32687C30.8582 9.85805 31.1567 10.5785 31.1567 11.3297V25.4918C31.1567 26.243 30.8582 26.9635 30.3271 27.4946C29.7959 28.0258 29.0754 28.3242 28.3242 28.3242H5.66485C4.91364 28.3242 4.1932 28.0258 3.66202 27.4946C3.13084 26.9635 2.83242 26.243 2.83242 25.4918V11.3297C2.83242 10.5785 3.13084 9.85805 3.66202 9.32687C4.1932 8.79569 4.91364 8.49727 5.66485 8.49727H8.49727C8.76006 8.49726 9.01766 8.42414 9.24126 8.28608C9.46486 8.14802 9.64564 7.95046 9.76337 7.71552L11.814 3.61417Z"
                        fill="#B5B5B5" />
                </svg>
            </label>
            <input type="file" id="file-input" accept="image/*" style="display: none;">
            <div class="uploaded-photo">
                <img id="uploaded-image" src="" alt="Uploaded Photo">
            </div>
        </div>
    </div>
    <div>
        <div class="camera-button " draggable="true">
            <textarea class="text-field3" id="textField1" draggable="true" placeholder="UserName"></textarea>
            <label for="file-input" class="custom-upload-button2">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20" fill="none">
                    <path
                        d="M9.401 16.1607L16.797 8.76472C15.5526 8.2452 14.4226 7.48614 13.471 6.53072C12.5151 5.57893 11.7557 4.44849 11.236 3.20372L3.84 10.5997C3.263 11.1767 2.974 11.4657 2.726 11.7837C2.4331 12.159 2.18196 12.5651 1.977 12.9947C1.804 13.3587 1.675 13.7467 1.417 14.5207L0.0549955 18.6037C-0.00769076 18.7907 -0.0169912 18.9914 0.0281393 19.1833C0.0732699 19.3753 0.171042 19.5508 0.310467 19.6903C0.449892 19.8297 0.625441 19.9274 0.817383 19.9726C1.00932 20.0177 1.21005 20.0084 1.397 19.9457L5.48 18.5837C6.255 18.3257 6.642 18.1967 7.006 18.0237C7.436 17.8187 7.842 17.5677 8.217 17.2747C8.535 17.0267 8.824 16.7377 9.401 16.1607ZM18.849 6.71272C19.5864 5.97529 20.0007 4.97511 20.0007 3.93222C20.0007 2.88933 19.5864 1.88916 18.849 1.15172C18.1116 0.414286 17.1114 7.77013e-09 16.0685 0C15.0256 -7.77013e-09 14.0254 0.414286 13.288 1.15172L12.401 2.03872L12.439 2.14972C12.8761 3.40044 13.5914 4.53562 14.531 5.46972C15.493 6.43742 16.668 7.16683 17.962 7.59972L18.849 6.71272Z"
                        fill="#B5B5B5" />
                </svg>
            </label>
        </div>
        <div class="button-group">
            <div class="H-input">
                <a href="SmartChef_Change.html">
                    <input type="submit" value="修改密碼" class="b-login2">
                </a>
            </div>
            <div class="H-input">
                <a href="SmartChef_User.html">
                    <input type="submit" value="儲存" class="b-login">
                </a>
            </div>
        </div>
    </div>
</div>

</diV>
<!-- <script src="js/Write.js"></script> -->
</body>
<script>
    document.getElementById("back").addEventListener("click", function() {
        window.history.back();
    });
</script>

<script>
const photoUpload = document.querySelector('.circle'); // 用於拖曳圖片的區域
const customUploadButton = document.querySelector('.custom-upload-button'); // 自定義的上傳按鈕
const uploadedImage = document.getElementById('uploaded-image'); // 顯示上傳的圖片
const fileInput = document.getElementById('file-input'); // 文件上傳輸入框

// 控制變數
let isUploading = false; // 標誌是否正在上傳中
let preventMultipleUploads = false; // 標誌是否要防止多次上傳

// 監聽拖曳事件
photoUpload.addEventListener('dragover', function (e) {
    e.preventDefault(); // 防止瀏覽器的默認行為
    if (!isUploading) {
        photoUpload.classList.add('dragover'); // 添加CSS類以顯示拖曳效果
    }
});

// 監聽拖曳結束事件
photoUpload.addEventListener('dragleave', function () {
    if (!isUploading) {
        photoUpload.classList.remove('dragover'); // 移除拖曳效果的CSS類
    }
});

// 監聽放置事件
photoUpload.addEventListener('drop', function (e) {
    e.preventDefault(); // 防止瀏覽器的默認行為
    if (!isUploading) {
        photoUpload.classList.remove('dragover'); // 移除拖曳效果的CSS類
        const file = e.dataTransfer.files[0]; // 獲取拖曳的文件

        // 檢查文件是否為圖片且不在上傳過程中
        if (file && file.type.startsWith('image/') && !preventMultipleUploads) {
            isUploading = true; // 標誌為上傳中
            handleImageUpload(file); // 處理圖片上傳
        }
    }
});

// 監聽自定義上傳按鈕的點擊事件
customUploadButton.addEventListener('click', function () {
    if (!isUploading && !preventMultipleUploads) {
        fileInput.click(); // 觸發文件上傳輸入框的點擊事件
    }
});

// 監聽文件上傳輸入框的文件選擇事件
fileInput.addEventListener('change', function () {
    if (!isUploading && !preventMultipleUploads) {
        const file = fileInput.files[0]; // 獲取所選文件

        // 檢查文件是否為圖片
        if (file && file.type.startsWith('image/')) {
            isUploading = true; // 標誌為上傳中
            handleImageUpload(file); // 處理圖片上傳
        }
    }
});

// 在handleImageUpload函数中的代码会将上传的图像显示在新的照片容器中
function handleImageUpload(file) {
    preventMultipleUploads = true; // 防止多次上载

    const originalSVG = document.querySelector('.UserPhoto svg');
    originalSVG.style.display = 'none';

    const reader = new FileReader();
    reader.onload = function (e) {
        uploadedImage.src = e.target.result; // 设置图片的src属性
        isUploading = false; // 上传完成
        preventMultipleUploads = false; // 允许未来的上传

        uploadedImage.parentElement.style.zIndex = -1;
        photoUpload.parentElement.style.border = 'none';

        // 显示上传的图片容器
        uploadedImage.parentElement.style.display = 'block';
    };
    reader.readAsDataURL(file); // 读取文件为数据URL
}

</script>
</html>